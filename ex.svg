<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300">
  <!-- Python do analizy danych -->
  <script type="text/python"><![CDATA[
    // Generate random data
    const data = Array.from({length: 100}, () => Math.random() * 100);
    const mean_val = data.reduce((a, b) => a + b, 0) / data.length;

    // Update SVG
    const text_elem = document.getElementById("result");
    text_elem.textContent = `Średnia: ${mean_val.toFixed(2)}`;
  ]]></script>

  <!-- Interaktywność w JavaScript -->
  <script><![CDATA[
    function regenerateData() {
        try {
            // Generate new random data
            const data = Array.from({length: 100}, () => Math.random() * 100);
            const mean_val = data.reduce((a, b) => a + b, 0) / data.length;
            
            // Update SVG
            const text_elem = document.getElementById("result");
            text_elem.textContent = `Średnia: ${mean_val.toFixed(2)}`;
        } catch (error) {
            console.error('Error regenerating data:', error);
            const errorText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            errorText.textContent = 'Error: ' + error.message;
            errorText.setAttribute('x', '20');
            errorText.setAttribute('y', '70');
            document.getElementsByTagName('svg')[0].appendChild(errorText);
        }
    }
    
    // Try to initialize when loaded
    window.onload = function() {
      regenerateData();
    }
  ]]></script>

  <!-- Elementy wizualne -->
  <rect width="400" height="300" fill="#f0f8ff" stroke="#4682b4"/>
  <text id="result" x="200" y="150" text-anchor="middle"
        font-family="Arial" font-size="16">Obliczanie...</text>
  <rect x="150" y="200" width="100" height="30" fill="#4682b4"
        onclick="regenerateData()" style="cursor:pointer;"/>
  <text x="200" y="220" text-anchor="middle" fill="white"
        style="pointer-events:none;">Przelicz</text>
</svg>